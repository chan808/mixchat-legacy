# ì±„íŒ… ì‹œìŠ¤í…œ ë¶€í•˜ í…ŒìŠ¤íŠ¸

MixChat í”„ë¡œì íŠ¸ì˜ ì‹œìŠ¤í…œ ì „ì²´ì— ëŒ€í•œ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ë° ì„±ëŠ¥ ì¸¡ì • ë„êµ¬

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ì¢…ë¥˜

### 1. `chat-api-test.js` - REST API ë¶€í•˜ í…ŒìŠ¤íŠ¸
- ì±„íŒ…ë°© ì¡°íšŒ, ë©”ì‹œì§€ ì¡°íšŒ API ì„±ëŠ¥ ì¸¡ì •
- N+1 ë¬¸ì œ í•´ê²° ì „í›„ ë¹„êµ

### 2. `websocket-test.js` - WebSocket ë¶€í•˜ í…ŒìŠ¤íŠ¸
- ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹  ì„±ëŠ¥
- ë™ì‹œ ì ‘ì†ì ìˆ˜ì— ë”°ë¥¸ ë©”ì‹œì§€ ì „ë‹¬ ì§€ì—° ì¸¡ì •

### 3. `stress-test.js` - ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸
- ì ì§„ì  ë¶€í•˜ ì¦ê°€ë¡œ ì‹œìŠ¤í…œ ì„ê³„ì  íŒŒì•…
- Auto Scaling ê¸°ì¤€ì  ë„ì¶œ

### 4. `e2e-scenario-test.js` - E2E ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì ì‹¤ì œ í–‰ë™ íŒ¨í„´ ì‹œë®¬ë ˆì´ì…˜

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ì‚¬ì „ ì¤€ë¹„
```bash
# K6 ì„¤ì¹˜ (Windows)
choco install k6

# ë˜ëŠ” ë‹¤ìš´ë¡œë“œ
# https://k6.io/docs/get-started/installation/

# í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„
# test-data/users.json íŒŒì¼ì— ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê³„ì • ì •ë³´ ì…ë ¥
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ê¸°ë³¸ ì‹¤í–‰
k6 run chat-api-test.js

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •í•˜ì—¬ ì‹¤í–‰
k6 run -e BASE_URL=http://localhost:8080 chat-api-test.js

# Prometheusë¡œ ë©”íŠ¸ë¦­ ì „ì†¡í•˜ë©° ì‹¤í–‰
k6 run --out prometheus=localhost:9090 chat-api-test.js

# ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ì €ì¥
k6 run --out json=results/test-result.json chat-api-test.js
```

## ğŸ“Š ë©”íŠ¸ë¦­ ìˆ˜ì§‘

### Prometheus ì—°ë™
```bash
# xk6ë¡œ Prometheus Remote Write í”ŒëŸ¬ê·¸ì¸ ë¹Œë“œ
xk6 build --with github.com/grafana/xk6-output-prometheus-remote

# Prometheusë¡œ ë©”íŠ¸ë¦­ ì „ì†¡
./k6 run --out experimental-prometheus-rw chat-api-test.js
```

### Grafana ëŒ€ì‹œë³´ë“œ
- K6 ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ (ID: 2587)
- Spring Boot ëŒ€ì‹œë³´ë“œ (ID: 11378)

## ğŸ¯ ì„±ëŠ¥ ëª©í‘œ

| ë©”íŠ¸ë¦­ | ëª©í‘œ |
|--------|------|
| ì‘ë‹µ ì‹œê°„ (p95) | < 500ms |
| ë©”ì‹œì§€ ì¡°íšŒ (p95) | < 800ms |
| ì—ëŸ¬ìœ¨ | < 1% |
| ë™ì‹œ ì ‘ì†ì | 500ëª…+ |

## ğŸ“ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡

### Before (N+1 ë¬¸ì œ í•´ê²° ì „)
- ë‚ ì§œ: YYYY-MM-DD
- ë™ì‹œ ì‚¬ìš©ì:
- p95 ì‘ë‹µì‹œê°„:
- ì—ëŸ¬ìœ¨:
- ë³‘ëª© ì§€ì :

### After (N+1 ë¬¸ì œ í•´ê²° í›„)
- ë‚ ì§œ: YYYY-MM-DD
- ë™ì‹œ ì‚¬ìš©ì:
- p95 ì‘ë‹µì‹œê°„:
- ì—ëŸ¬ìœ¨:
- ê°œì„ ìœ¨:

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¸ì¦ í† í° ë§Œë£Œ
- `test-data/users.json`ì˜ ê³„ì •ì´ ìœ íš¨í•œì§€ í™•ì¸
- í…ŒìŠ¤íŠ¸ ì „ DBì— í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„± í•„ìš”

### ì—°ê²° ê±°ë¶€
- ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
- `BASE_URL` í™˜ê²½ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
